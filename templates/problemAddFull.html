{% extends "layout.html" %}

{% block body %}



<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.14.30/js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.min.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />


<script>
    function myProblemFunction(val,t) { //   t = objenin idsi , bunu onchange de gonderiyoruz
        //alert("The input value has changed. The new value is: " + val + " --- " + t);
        //document.getElementById("id_form-"+t[8]+"-colour").value = val;

        var url = $("#problemAddForm").attr("data-product-url");  // müşteriye bağlı olarak listelenecek order linki , form un id kısmından alınır
               
        var customer_id = val;         

            $.ajax({                       // initialize an AJAX request
              url: url,                    // yukarıda formdan alınan
              data: {
                'customer': customer_id       // müşteri id si url ile gonderilir
                
              },
              success: function (data) {    // `data` options için hazır formatta data dönecek bunu order listesine göneceğiz.
                                            // http://localhost:8000/order/ajax/orderDropList/?customer=26 formatında örnek data test edilebilir
                $("#id_order").html(data);  // replace the contents of the city input with the data that came from the server
              }
            });

      }
</script>


{% load crispy_forms_tags %}
<div class="row">
    <div >
        <h3> Problem Ekle </h3>   
        <hr>

<!-- fields=['order','description','statu','created_user','urun_grubu'] -->
        
        <form method="post" id="problemAddForm" data-product-url="{% url 'order:ajax_orderDropList' %}">
            {% csrf_token %}

            <div class="row">
                <div  class="col-md-2 mb-0">
                    {{form.order| as_crispy_field }}
                </div>
                <div  class="col-md-2 mb-0">
                    
                    
                    {{form.problem_file| as_crispy_field }}
                </div>
               
                <div  class="col-md-2 mb-0">
                    
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-0">
                    {{form.description| as_crispy_field }}
                </div>
            </div>
            

            <div class="row">
                <div  class="col-md-2 mb-0">
                    {{form.statu| as_crispy_field }}
                </div>
                <div  class="col-md-2 mb-0">
                    {{form.created_user| as_crispy_field }}
                </div>
                <div  class="col-md-2 mb-0">
                    
                </div>
            </div>


            

            

            <br>
            <button type="submit" class="btn btn-warning">Giriş</button>
        </form>
    </div>


    
</div>
{% endblock body %}