{% extends "layout.html" %}

{% block body %}
{% load crispy_forms_tags %}



<!--   ---------------------------------------------  -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.14.30/js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.min.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<script>

    $(document).ready(function () {
            $('#tahmini_tarih_min').datetimepicker({
                format: 'YYYY-MM-DD',
                useCurrent: true,
                keepOpen: true,
                allowInputToggle: true,
                
                ignoreReadonly: true,
                showTodayButton: true,
                viewMode: 'days'
            });
            $('#id_tahmini_tarih_max').datetimepicker({
                format: 'YYYY-MM-DD',
                useCurrent: true,
                keepOpen: true,
                allowInputToggle: true,
                
                ignoreReadonly: true,
                showTodayButton: true,
                viewMode: 'days'
            });
            $('#divEndDate').datetimepicker({
                format: 'YYYY-MM-DD',
                useCurrent: false,
                keepOpen: true,
                allowInputToggle: true,
                maxDate: new Date(),
                ignoreReadonly: true,
                showTodayButton: true,
                viewMode: 'days'
            });
            $('#id_tahmini_tarih_min').datetimepicker({
                format: 'YYYY-MM-DD',
                useCurrent: true,
                keepOpen: true,
                allowInputToggle: true,
                
                ignoreReadonly: true,
                showTodayButton: true,
                viewMode: 'days'
            });
            

    });
    
    </script>
<!--   ---------------------------------------------  -->



<div class="row">
  
    <h3> 
            Siparişe ürün Ekleme
            
    </h3>   
   <br><br>
   <form method="post" enctype="multipart/form-data" id="orderProductForm" data-product-url="{% url 'order:ajax_productDropList' %}">
   
        {% csrf_token %}
       
        

        {{ form.media }}
      <!--  <div class="form-group col-md-3 mb-0">
            {{form|crispy}}
        </div>

          -->
        

        <div class="row">
            <div  class="col-md-2 mb-0">
                {{ form.urun_grubu|as_crispy_field }}
            </div>
            <div  class="col-md-2 mb-0">
                {{ form.marka|as_crispy_field }}
            </div>
            <div  class="col-md-2 mb-0">
                {{ form.product|as_crispy_field }}
            </div>
            <div  class="col-md-2 mb-0">
                {{ form.amount|as_crispy_field }}
            </div>
            <div  class="col-md-2 mb-0">
                {{ form.colour|as_crispy_field }}
            </div>
        </div> 
      
        <br>

        <button type="submit" class="btn btn-warning">Giriş</button>
    </form>

</div>


<!--   ---------------------------------------------  -->
<script>
    function myFunction(val,t) { //   t = objenin idsi
        //alert("The input value has changed. The new value is: " + val + t[8]);
    
        //document.getElementById("id_form-"+t[8]+"-colour").value = val;

        var url = $("#orderProductForm").attr("data-product-url");  // get the url of the `load_cities` view
        //var url = "/order/ajax/productDropList/";
        
        if ( t[10] == "u" ){    //urun grubu change olmuş
            var urun_grubu = val;  // urun grubu değeri alınır
            //var marka = document.getElementById("id_form-"+t[8]+"-marka").value;
            var marka = document.getElementById("id_marka").value;
            
        }else {                 //marka change olmuş
            //var urun_grubu = document.getElementById("id_form-"+t[8]+"-urun_grubu").value;
            var urun_grubu = document.getElementById("id_urun_grubu").value;
            var marka = val ;

        }
        

        $.ajax({                       // initialize an AJAX request
            url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
            data: {
            'urun_grubu': urun_grubu ,      // add the country id to the GET parameters
            'marka': marka 
            },
            success: function (data) {   // `data` is the return of the `load_cities` view function
            $("#id_product").html(data);  // replace the contents of the city input with the data that came from the server
            //$("#id_form-"+t[8]+"-product").html(data);  // replace the contents of the city input with the data that came from the server
            }
        });

      }
</script>
<!--   ---------------------------------------------  -->




{% endblock body %}